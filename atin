--[[
   Script Atin Loop v2
   Creator: Hamz
   Note: TP Puncak → Tunggu 4s + Countdown → Jalan → Rejoin → Auto Execute (loop)
--]]

local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local StarterGui = game:GetService("StarterGui")
local lp = Players.LocalPlayer

-- Fungsi buat notifikasi
local function Notify(msg)
    StarterGui:SetCore("SendNotification", {
        Title = "Script Atin",
        Text = msg,
        Duration = 2
    })
end

task.spawn(function()
    task.wait(1) -- tunggu karakter spawn
    local char = lp.Character or lp.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")

    -- Teleport ke puncak
    hrp.CFrame = CFrame.new(787.30, 2148.57, 3909.59)
    Notify("Sudah sampai di Puncak!")

    -- Countdown 4 detik
    for i = 4,1,-1 do
        Notify("Summit dihitung dalam " .. i .. " detik...")
        task.wait(1)
    end

    -- Biar kehitung summit, karakter jalan sedikit
    local humanoid = char:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid:Move(Vector3.new(0,0,-1), true) -- jalan mundur dikit
        task.wait(1)
        humanoid:Move(Vector3.new(0,0,0), false) -- stop
    end

    Notify("Summit seharusnya sudah tercatat!")

    task.wait(1)

    -- Rejoin server baru
    TeleportService:Teleport(game.PlaceId, lp)

    -- Auto execute lagi (loop)
    queue_on_teleport([[
        loadstring(game:HttpGet("https://raw.githubusercontent.com/emanwars/fling-all-aja/refs/heads/main/atin"))()
    ]])
end)
